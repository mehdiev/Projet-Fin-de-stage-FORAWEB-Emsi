@model Foramag.Models.Document
@{
    ViewBag.Title = "Détail Document";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var lignes = ViewBag.Lignes as List<Foramag.Models.V_Doc_lignes>;
}

<div class="container mt-4">
    <h4 class="mb-3">📄 Informations du document</h4>
    <table class="table table-bordered w-75 mx-auto">
        <tr><th>Num Document</th><td>@Model.Num_Document</td></tr>
        <tr><th>Date Document</th><td>@Model.Date_Document.ToShortDateString()</td></tr>
        <tr><th>Code Client</th><td>@Model.Code_Client</td></tr>
        <tr><th>Nom Client</th><td>@Model.Nom_Client</td></tr>
        <tr><th>Type</th><td>@Model.Type</td></tr>
        <tr><th>Total TTC</th><td>@Model.Total_TTC</td></tr>
        <tr><th>Code COM</th><td>@Model.Code_COM</td></tr>
        <tr><th>Transporteur</th><td>@Model.Transporteur</td></tr>
        <tr><th>Num Expedition</th><td>@Model.Num_Expedition</td></tr>
    </table>

    <h4 class="mt-5 mb-3">🧾 Détail Facture Client</h4>
    @if (lignes != null && lignes.Any())
    {
        <table class="table table-striped table-bordered text-center">
            <thead class="table-light">
                <tr>
                    <th>Référence</th>
                    <th>Désignation</th>
                    <th>Quantité</th>
                    <th>Remise (%)</th>
                    <th>Prix Unitaire</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var ligne in lignes)
                {
                    <tr>
                        <td>@ligne.Reference</td>
                        <td>@ligne.Designation</td>
                        <td>@ligne.Quantite</td>
                        <td>@ligne.Remise</td>
                        <td>@ligne.Prix_Unitaire</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p class="text-center fst-italic text-muted">Aucune ligne trouvée pour ce document.</p>
    }

    <!-- ✅ Neatly positioned return button -->
    <div class="row mt-4">
        <div class="col text-center">
            <a href="@Url.Action("Index", "Documents")" class="btn btn-secondary px-4">
                ⬅️ Retour à la liste
            </a>
        </div>
    </div>
</div>